# Проект виртуальной стажировки спринт 1 от Skillfactory
## Добавлены методы для внесения данных

### Методы:

POST api/pereval/
принимает JSON в теле запроса с информацией о перевале. Пример JSON-a:



    {
    "beauty_title": "beauty_title",
    "title": "title",
    "other_titles": "other_titles",
    "connect": "connect",
    "add_time": "22-09-2024 11:25:11",
    "user": {
        "email": "skilltest@mail.ru",
        "fam": "Иванов",
        "name": "Виктор",
        "otc": "Сергеевич",
        "phone": "79998887766"
    },
    "coords": {
        "latitude": "43.345068",
        "longitude": "42.465897",
        "height": 5642
    },
    "status": "new",
    "level": {
        "winter": "3Б",
        "spring": "3Б",
        "summer": "3Б",
        "autumn": "3Б"
    },
    "images": []
}

Результат метода: JSON

status — код HTTP, целое число: 500 — ошибка при выполнении операции; 400 — Bad Request (при нехватке полей); 200 — успех.
message — строка: Причина ошибки (если она была); Отправлено успешно; Если отправка успешна, дополнительно возвращается id вставленной записи. id — идентификатор, который был присвоен объекту при добавлении в базу данных. 

После того, как турист добавит в базу данных информацию о новом перевале, сотрудники ФСТР проведут модерацию для каждого нового объекта и поменяют поле status. Допустимые значения поля status:

        ('new', 'Новое'),
        ('pen', 'На рассмотрении'),
        ('acp', 'Принято'),
        ('rej', 'Отклонено')
        
### Метод:

GET api/pereval/<id>
получает одну запись (перевал) по её id с выведением всей информацию об перевале, в том числе статус модерации.

### Метод:

PATCH api/pereval/<id>
позволяет отредактировать существующую запись (замена), при условии что она в статусе "NW". При этом редактировать можно все поля, кроме тех, что содержат ФИО, адрес почты и номер телефона. В качестве результата изменения приходит ответ содержащий следующие данные:

state:
1 — если успешно удалось отредактировать запись в базе данных.
0 — в отредактировать запись не удалось.
message: сообщение о причине неудачного обновления записи.
### Метод:

GET api/pereval/?user_id__email=<email>
позволяет получить данные всех объектов, отправленных на сервер пользователем с почтой.

В качестве реализации использована фильтрация по адресу электронной почты пользователя с помощью пакета django-filter.   


Документация swagger: http://127.0.0.1:8000/swagger/




